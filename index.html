<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„œìš¸ê°€ë™ì´ˆë“±í•™êµ êµë¬´ì—…ë¬´ ëŒ€ì‹œë³´ë“œ (2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
body { 
    font-family: 'Noto Sans KR', sans-serif; 
    background-color: #f4f7f6; 
}

.bg-school-green { 
    background-color: #7dc242; 
}

.text-school-green { 
    color: #569e38; 
}

.border-school-green { 
    border-color: #7dc242; 
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.dashboard-card { 
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: transform 0.2s;
}

.dashboard-card:hover { 
    transform: translateY(-2px); 
}

/* ë§í¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.link-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background-color: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    transition: all 0.2s;
    cursor: pointer;
    height: 100%;
}

.link-card:hover {
    border-color: #7dc242;
    background-color: #f0fdf4;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}

.link-icon { 
    font-size: 24px; 
    margin-right: 12px; 
}

.link-title { 
    font-weight: 700; 
    color: #374151; 
    font-size: 16px; 
}

.link-desc { 
    font-size: 12px; 
    color: #9ca3af; 
    margin-top: 2px; 
}

/* ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ */
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    border-top: 1px solid #e5e7eb;
    border-left: 1px solid #e5e7eb;
}

.calendar-day {
    min-height: 130px;
    padding: 6px;
    border-right: 1px solid #e5e7eb;
    border-bottom: 1px solid #e5e7eb;
    background: white;
    display: flex;
    flex-direction: column;
    gap: 2px;
    cursor: pointer;
    transition: background-color 0.2s;
    overflow: hidden;
}

.calendar-day:hover { 
    background-color: #f9fafb; 
}

.calendar-day.today { 
    background-color: #ecfccb; 
    border: 2px solid #7dc242; 
}

.event-chip {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 4px;
    color: white;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: pointer;
    font-weight: 500;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    transition: opacity 0.2s;
    z-index: 10;
    margin-top: 1px;
}

.event-chip:hover { 
    opacity: 0.9; 
}

.school-event {
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 3px;
    background-color: #fff7ed; 
    color: #9a3412; 
    border: 1px solid #fed7aa;
    font-weight: 700;
    margin-bottom: 1px;
    word-break: keep-all;
    line-height: 1.3;
    text-align: left;
}

.text-holiday { 
    color: #dc2626; 
} 

.text-saturday { 
    color: #2563eb; 
} 

.room-tab {
    padding: 10px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    border: 2px solid;
}
/* ìƒ‰ìƒì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì •ë¨ */

.form-select, .form-input {
    width: 100%;
    padding: 10px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.form-select:focus, .form-input:focus {
    outline: none;
    border-color: #7dc242;
    ring: 2px solid #7dc242;
}
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <!-- Firebase í™˜ê²½ ë³€ìˆ˜ ì£¼ì… (Vercel) -->
    <script>
        // Vercel í™˜ê²½ ë³€ìˆ˜ë¥¼ window ê°ì²´ì— ì£¼ì…
        // Vercelì€ ë¹Œë“œ íƒ€ì„ì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì£¼ì…í•˜ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” ë¹ˆ ê°’ìœ¼ë¡œ ì‹œì‘
        // ì‹¤ì œ ë°°í¬ ì‹œ Vercelì´ ìë™ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì£¼ì…
        // ë¡œì»¬ ê°œë°œ ì‹œì—ëŠ” ì§ì ‘ ê°’ì„ ì…ë ¥í•˜ê±°ë‚˜, ë¹Œë“œ ì‹œ ì£¼ì…
        // Firebase ì„¤ì • (ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œë„ ì˜ˆì•½ì„ ë³¼ ìˆ˜ ìˆë„ë¡ Firebase ì‚¬ìš©)
        window.firebaseConfig = {
            apiKey: "AIzaSyA1Ah3xbmIyadDzhH_FeUGof6UACbZU7qg",
            authDomain: "gadongonline-5da5e.firebaseapp.com",
            projectId: "gadongonline-5da5e",
            storageBucket: "gadongonline-5da5e.firebasestorage.app",
            messagingSenderId: "66977932038",
            appId: "1:66977932038:web:c0675ac71c668c60edf487",
            measurementId: "G-K2PESDLH9S"
        };
    </script>
</head>
<body class="text-gray-800 bg-gray-50 pb-20">
    <header class="bg-white border-b-4 border-school-green shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-school-green rounded-full flex items-center justify-center text-white text-xl font-bold">ê°€</div>
                <h1 class="text-2xl font-bold text-gray-800 tracking-tight">ì„œìš¸ê°€ë™ì´ˆë“±í•™êµ <span class="text-sm font-medium text-gray-500 ml-1">êµë¬´ì—…ë¬´ì§€ì›</span></h1>
            </div>
            <a href="https://gadong.sen.es.kr" target="_blank" class="hidden md:flex items-center gap-2 bg-gray-800 text-white px-4 py-2 rounded-full text-sm hover:bg-black transition">
                <span>í•™êµ í™ˆí˜ì´ì§€</span>
            </a>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- 1. ê¸‰ì‹ ìœ„ì ¯ -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-8 border-l-4 border-school-green flex items-center gap-6">
            <div class="bg-green-100 p-4 rounded-full text-3xl">ğŸ±</div>
            <div class="flex-grow">
                <div class="flex items-center gap-2 mb-1">
                    <button onclick="changeLunchDate(-1)" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-500">â—€</button>
                    <h2 class="text-lg font-bold text-gray-800" id="lunch-date-display">ì˜¤ëŠ˜ì˜ ê¸‰ì‹</h2>
                    <button onclick="changeLunchDate(1)" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-500">â–¶</button>
                    <button onclick="resetLunchDate()" id="today-button" class="ml-2 px-2 py-1 text-xs font-bold bg-gray-100 hover:bg-gray-200 text-gray-600 rounded">ì˜¤ëŠ˜</button>
                </div>
                <p id="lunch-menu" class="text-gray-600 mt-1 text-lg font-medium leading-relaxed break-keep">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
        </div>

        <!-- 2. ë°”ë¡œê°€ê¸° ë§í¬ ëª¨ìŒ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8" id="quickLinks"></div>

        <!-- 3. ë©”ì¸ ìº˜ë¦°ë” ì˜ì—­ -->
        <div class="dashboard-card p-6 min-h-[600px] flex flex-col">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                        <span class="text-school-green">ğŸ«</span> ê³µê°„ ì˜ˆì•½ í˜„í™©
                    </h2>
                    <p class="text-sm text-gray-500 mt-1">íƒ­ì„ ëˆŒëŸ¬ ê³µê°„ì„ ì„ íƒí•˜ê³ , <span class="font-bold text-school-green">ë‚ ì§œë¥¼ í´ë¦­</span>í•˜ì—¬ ì˜ˆì•½í•˜ì„¸ìš”.</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="openReservationModal()" class="px-6 py-2 bg-school-green hover:bg-green-600 text-white font-bold rounded-full shadow-lg transition flex items-center gap-2">
                        <span>+ ì˜ˆì•½í•˜ê¸°</span>
                    </button>
                </div>
            </div>
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide" id="roomTabs"></div>
            <div class="flex justify-between items-center mb-4 bg-gray-50 p-3 rounded-lg">
                <h3 class="text-xl font-bold text-gray-800" id="resCalendarTitle">2025ë…„ 11ì›”</h3>
                <div class="flex gap-2">
                    <button onclick="changeResMonth(-1)" class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">â—€ ì´ì „ë‹¬</button>
                    <button onclick="changeResMonth(0)" id="calendar-today-button" class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">ì˜¤ëŠ˜</button>
                    <button onclick="changeResMonth(1)" class="px-3 py-1 bg-white border rounded hover:bg-gray-100 text-sm">ë‹¤ìŒë‹¬ â–¶</button>
                </div>
            </div>
            <div class="grid grid-cols-7 border-b-2 border-gray-200 text-center text-sm font-bold text-gray-600 pb-2 mb-2">
                <div class="text-red-500">ì¼</div>
                <div>ì›”</div>
                <div>í™”</div>
                <div>ìˆ˜</div>
                <div>ëª©</div>
                <div>ê¸ˆ</div>
                <div class="text-blue-500">í† </div>
            </div>
            <div id="resCalendarGrid" class="calendar-grid flex-grow bg-white rounded-b-lg overflow-hidden"></div>
        </div>

        <div class="mt-12 flex justify-center">
            <a href="https://sen.eduptl.kr/bpm_lgn_lg00_001.do?noEpSession" target="_blank" class="flex items-center gap-2 px-8 py-3 bg-gray-700 text-white rounded-full text-base font-medium hover:bg-gray-900 transition shadow-lg">
                <span>K-ì—ë“€íŒŒì¸ ë°”ë¡œê°€ê¸°</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
            </a>
        </div>
    </main>

    <!-- ì•Œë¦¼ ëª¨ë‹¬ -->
    <div id="alertModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-[70] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100">
            <div class="p-4 border-b bg-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-gray-800">ì•Œë¦¼</h3>
                <button onclick="closeAlert()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <div class="p-6 text-center">
                <p id="alertMessage" class="text-gray-700 font-medium">ë‚´ìš©</p>
            </div>
            <div class="p-4 bg-gray-50 flex justify-center">
                <button onclick="closeAlert()" class="px-6 py-2 bg-school-green text-white rounded-lg hover:bg-green-600 transition">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ë¹„ë°€ë²ˆí˜¸ ëª¨ë‹¬ -->
    <div id="passwordModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-[70] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden">
            <div class="p-4 border-b bg-red-50 flex justify-between items-center">
                <h3 class="font-bold text-red-600">ì˜ˆì•½ ì·¨ì†Œ</h3>
                <button onclick="closePasswordModal()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <div class="p-6">
                <p class="text-sm text-gray-600 mb-3">ì˜ˆì•½ ì‹œ ì„¤ì •í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.<br><small class="text-gray-400">(ë§ˆìŠ¤í„°í‚¤: 2025)</small></p>
                <input type="password" id="deletePasswordInput" class="form-input w-full text-center text-lg tracking-widest" placeholder="ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” ë§ˆìŠ¤í„°í‚¤" maxlength="8" onkeypress="if(event.key==='Enter') confirmDelete()">
            </div>
            <div class="p-4 bg-gray-50 flex justify-end gap-2">
                <button onclick="closePasswordModal()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">ì·¨ì†Œ</button>
                <button onclick="confirmDelete()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">ì‚­ì œí•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì˜ˆì•½ ëª¨ë‹¬ -->
    <div id="reservationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden">
            <div class="p-4 border-b bg-school-green flex justify-between items-center text-white">
                <h3 class="font-bold text-lg">ìƒˆ ì˜ˆì•½ ì¶”ê°€</h3>
                <button onclick="closeReservationModal()" class="text-white hover:text-gray-200 text-2xl font-bold">&times;</button>
            </div>
            <div class="p-6 space-y-4 max-h-[80vh] overflow-y-auto">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ì‚¬ìš© ê³µê°„</label>
                    <select id="resSpace" class="form-select font-bold text-school-green"></select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label>
                    <input type="date" id="resDate" class="form-input">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">í•™ë…„</label>
                        <select id="resGrade" class="form-select" onchange="updateTimeOptions()">
                            <option value="">ì„ íƒ</option>
                            <option value="1í•™ë…„">1í•™ë…„</option>
                            <option value="2í•™ë…„">2í•™ë…„</option>
                            <option value="3í•™ë…„">3í•™ë…„</option>
                            <option value="4í•™ë…„">4í•™ë…„</option>
                            <option value="5í•™ë…„">5í•™ë…„</option>
                            <option value="6í•™ë…„">6í•™ë…„</option>
                            <option value="êµê³¼">êµê³¼ì „ë‹´</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ë°˜</label>
                        <select id="resClass" class="form-select">
                            <option value="1ë°˜">1ë°˜</option>
                            <option value="2ë°˜">2ë°˜</option>
                            <option value="3ë°˜">3ë°˜</option>
                            <option value="4ë°˜">4ë°˜</option>
                            <option value="5ë°˜">5ë°˜</option>
                            <option value="6ë°˜">6ë°˜</option>
                            <option value="7ë°˜">7ë°˜</option>
                            <option value="8ë°˜">8ë°˜</option>
                            <option value="9ë°˜">9ë°˜</option>
                            <option value="ì „ì²´">ì „ì²´</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">êµì‹œ (ì‹œê°„)</label>
                    <select id="resPeriod" class="form-select bg-gray-50">
                        <option value="">í•™ë…„ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸ (ì·¨ì†Œìš©)</label>
                    <input type="password" id="resPassword" class="form-input" placeholder="ìˆ«ì 4ìë¦¬" maxlength="8">
                </div>
                <button onclick="addReservation()" class="w-full bg-school-green hover:bg-green-600 text-white font-bold py-3 rounded-lg shadow transition mt-2">ì˜ˆì•½ ì™„ë£Œ</button>
            </div>
        </div>
    </div>

    <!-- ìƒì„¸ ëª¨ë‹¬ -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-60 hidden z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm transform transition-all scale-100">
            <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">ì˜ˆì•½ ìƒì„¸ ë‚´ìš©</h3>
            <div id="detailContent" class="space-y-3"></div>
            <div class="mt-6 flex justify-end gap-2">
                <button onclick="openPasswordModal()" class="px-4 py-2 bg-red-100 text-red-600 rounded-lg text-sm hover:bg-red-200">ì‚­ì œ</button>
                <button onclick="closeDetailModal()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm hover:bg-gray-300">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ëª¨ë“  JavaScriptë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ í¬í•¨ (ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ ì‘ë™) -->
    <script src="js/app.js"></script>
</body>
</html>

